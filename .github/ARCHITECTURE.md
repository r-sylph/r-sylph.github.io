# システムアーキテクチャ

# コードアーキテクチャ

レイヤードアーキテクチャを採用

## 各レイヤーについて

それぞれ下のレイヤーに依存してはならない

上のレイヤーの利用は可能

下に行くほどアプリケーション固有

- `utils`
  - ユーティリティメソッド群
  - 主に`JavaScript`や`TypeScript`が提供している機能に対する便利メソッド群を配置する
- `domain`
  - ドメインロジックやドメインエンティティなどの定義群（どのアプリケーションでも利用できる様なものがここに配置される）
  - 他のコードに影響を受けず自身のあるべき適切な形で実装する
- `drivers`
  - アプリケーションの実行環境に対するアクセスを行うコード群（`window`や`console`や`mysql`、`redis`など）
  - 必要があれば外から依存を注入する
- `infra`
  - 関連サービスやリポジトリを利用するための変換層
  - 外部 API や DB、キャッシュなどのクライアントを配置する
- `usecases`
  - アプリケーションの挙動としてのロジック群
  - アプリケーションの仕様書に書かれるような挙動は主にここに表現する
- `frameworks`
  - 利用しているフレームワーク用コード群
  - 利用しているフレームワークを捨てる時まるごと捨てられる形にまとめる
  - 他のフレームワークに乗り換える際は移植が必要（流用できるものはここにあるべきではない）
- `assets`
  - 成果物が利用する画像などのリソース群

## レイヤー間のやりとり

- レイヤーを跨ぐためのデータ変換処理は`interface-adapters`に配置する
  - 上位レイヤーに対する変換は`Controller`に実装する
  - 下位レイヤーに対する変換は`Presenter`に実装する

## 細かい話

- ディレクトリやオブジェクト、インポート/エクスポートの構造に関して
  - 上の階層に識別子や物自体にあたるものは作らない(機能名などで作る)
  - 兄弟に何度も同じ単語が出てくるのは許容するが親子で何度も同じ単語が出てくるのは避ける
  - 複数形の名前を持つディレクトリにはその概念をまとった物が並ぶようにすること
